<!DOCTYPE html>
<html lang="ja">
<head>
  <script src="event-config.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç ‚ã®ç¥­å…¸2026 å…¬å¼ã‚¢ãƒ—ãƒª</title>

  <!-- PWAé–¢é€£ -->
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png" />

  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      text-align: center;
      padding: 40px 20px 110px;
      background-color: #f0f8ff;
      margin: 0;
    }
    h1 {
      font-size: 1.8rem;
      margin: 10px 0 14px;
      line-height: 1.25;
    }
    p {
      font-size: 1.05rem;
      margin: 0 0 22px;
      line-height: 1.6;
    }
    .btn {
      display: block;
      width: 86%;
      max-width: 340px;
      margin: 10px auto;
      padding: 14px 18px;
      font-size: 1.12rem;
      border: none;
      border-radius: 10px;
      background-color: #4fa3ff;
      color: white;
      cursor: pointer;
      font-weight: 800;
    }
    .btn:hover { background-color: #1e88e5; }

    .btn.sub {
      background-color: #ffffff;
      color: #1e88e5;
      border: 2px solid #1e88e5;
    }
    .btn.sub:hover { background-color: #e8f3ff; }

    .btn.gray {
      background-color: #7f8c8d;
    }
    .btn.gray:hover { background-color: #6c7a7b; }

    .btn.pink {
      background-color: #ff4081;
    }
    .btn.pink:hover { background-color: #e03570; }

    .tag {
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background:#e8f3ff;
      color:#1e5aa8;
      font-size:12px;
      margin-bottom:10px;
      font-weight: 800;
    }

    .muted {
      color: #3b3b3b;
      font-size: 0.95rem;
      margin-top: 14px;
      opacity: 0.9;
    }
  </style>
</head>

<body>
  <div class="tag">ç ‚ã®ç¥­å…¸å…¬å¼ã‚¢ãƒ—ãƒª</div>

  <h1>ç ‚ã®ç¥­å…¸2026</h1>
  <p>
    ç ‚åƒã®è§£èª¬ã‚’è¦‹ãŸã‚Šã€QRã‚¯ã‚¨ã‚¹ãƒˆã«å‚åŠ ã§ãã¾ã™ã€‚<br>
    ã¾ãšã¯ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰é¸ã‚“ã§ãã ã•ã„ã€‚
  </p>

  <!-- ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹ -->
  <button class="btn sub" onclick="location.href='howto.html'">ğŸ“˜ ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹</button>

  

  <!-- è¿½åŠ ï¼šQRã‚’èª­ã¿å–ã‚‹ï¼ˆç ‚åƒ/ã‚¯ã‚¨ã‚¹ãƒˆï¼‰ -->
  <button class="btn" onclick=\"scanNow()\">ğŸ“· QRã‚’èª­ã¿å–ã‚‹ï¼ˆç ‚åƒ/ã‚¯ã‚¨ã‚¹ãƒˆï¼‰</button>
<!-- âœ… ç ‚åƒä¸€è¦§ï¼ˆç´¢å¼•ï¼‰ -->
  <button class="btn sub" onclick="location.href='monuments_list.html'">ğŸ“ ç ‚åƒä¸€è¦§ï¼ˆç•ªå·ãƒ»è£½ä½œè€…ãƒ»åŸåãƒ»ã‚¨ãƒªã‚¢ï¼‰</button>
<!-- ã‚«ãƒ¡ãƒ©ãƒ†ã‚¹ãƒˆ -->
  <button class="btn" onclick="location.href='test-camera.html'">ğŸ“· ã‚«ãƒ¡ãƒ©ãƒ†ã‚¹ãƒˆ</button>

  <p class="muted" id="rescanTip" style="display:none;">âœ… ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ä»Šã„ã‚‹å ´æ‰€ã®QRã‚³ãƒ¼ãƒ‰ã‚’ã€ã‚‚ã†ä¸€åº¦èª­ã¿å–ã£ã¦ãã ã•ã„ã€‚</p>

  <p class="muted">Powered by SakuLink</p>

  <script>
    // åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆè¨€èªé¸æŠ â†’ ç™»éŒ²ï¼‰
    function ensureSetup() {
      const lang = localStorage.getItem("lang") || "";
      if (!lang) {
        window.location.href = "language.html";
        return false;
      }
      const reg = localStorage.getItem("app_registered") === "true";
      if (!reg) {
        window.location.href = "register.html";
        return false;
      }
      return true;
    }

    // ç™»éŒ²å¾Œã®ã€Œå†ã‚¹ã‚­ãƒ£ãƒ³æ¡ˆå†…ã€
    (function(){
      const tip = document.getElementById("rescanTip");
      if (!tip) return;
      if (localStorage.getItem("show_rescan_tip") === "true") {
        tip.style.display = "block";
        localStorage.removeItem("show_rescan_tip");
      }
    })();


    function goQuest(mode){
      localStorage.setItem("mode", mode);

      const introKey = (mode === "challenge") ? "visitedIntro_challenge" : "visitedIntro_family";
      const startUrl = (mode === "challenge") ? "start_challenge.html" : "start.html";

      // åˆå›ã ã‘introã¸ï¼ˆãƒ¢ãƒ¼ãƒ‰åˆ¥ã«1å›ãšã¤ï¼‰
      if (localStorage.getItem(introKey) !== "true") {
        window.location.href = "intro.html";
      } else {
        window.location.href = startUrl;
      }
    }

    function scanMonument() {
      if (!ensureSetup()) return;
      localStorage.setItem("mode", "info");
      window.location.href = "scanner/qr-scanner.html";
    }

    function scanNow() {
      if (!ensureSetup()) return;
      // äº’æ›ç”¨ï¼ˆä½¿ã†å ´åˆã®ã¿ï¼‰ï¼šç¾åœ¨ã®modeã®ã¾ã¾ã‚¹ã‚­ãƒ£ãƒ³
      window.location.href = "scanner/qr-scanner.html";
    }

    function startChallenge() {
      if (!ensureSetup()) return;
      localStorage.setItem("mode", "challenge");
      window.location.href = "scanner/qr-scanner.html";
    }

    function startFamily() {
      if (!ensureSetup()) return;
      localStorage.setItem("mode", "family");
      // æœ¬ç•ªã¯ã€Œæœ¬éƒ¨ç™»éŒ²å¾Œã®å°ç·šã€ã«å·®ã—æ›¿ãˆäºˆå®š
      window.location.href = "family_notice.html";
    }

    // Service Worker ç™»éŒ²ï¼ˆPWAåŒ–ç”¨ï¼‰
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('Service Worker registered with scope:', reg.scope))
        .catch(err => console.log('Service Worker registration failed:', err));
    }
  </script>
</body>
</html>
