<!doctype html>
<html lang="ja">
<head>
  <script src="event-config.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆ æ³¨æ„ã¨åŒæ„</title>
  <style>
    body{
      font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;
      margin:0;background:#f0f8ff;padding:34px 16px 120px;text-align:center;
    }
    .wrap{max-width:560px;margin:0 auto}
    .tag{
      display:inline-block;padding:6px 10px;border-radius:999px;
      background:#e8f3ff;color:#1e5aa8;font-size:12px;font-weight:800;margin-bottom:10px;
    }
    h1{font-size:1.55rem;margin:10px 0 10px;line-height:1.25}
    .box{
      background:#fff;border:1px solid #e5e7eb;border-radius:14px;
      padding:14px;text-align:left;line-height:1.7
    }
    .box ul{margin:10px 0 0;padding-left:20px}
    .muted{color:#444;font-size:.95rem;margin:12px 0 0;opacity:.9}
    .check{
      margin-top:14px;text-align:left;background:#fff;border:1px solid #e5e7eb;border-radius:14px;
      padding:12px;line-height:1.6
    }
    .btn{
      display:block;width:86%;max-width:340px;margin:12px auto;
      padding:14px 18px;font-size:1.12rem;border:none;border-radius:10px;
      background:#7f8c8d;color:#fff;cursor:pointer;font-weight:800;
    }
    .btn.primary{background:#4fa3ff}
    .btn.primary:hover{background:#1e88e5}
    .btn.sub{background:#fff;color:#1e88e5;border:2px solid #1e88e5}
    .btn.sub:hover{background:#e8f3ff}
  </style>

  <script>
  (function(){
    const lang = localStorage.getItem("lang") || "";
    const reg  = localStorage.getItem("app_registered") === "true";
    if(!lang){ location.replace("language.html"); return; }
    if(!reg){ location.replace("register.html"); return; }
  })();
  </script>

  <link rel="apple-touch-icon" href="icons/apple-touch-icon-v2.png" />
  <link rel="icon" href="icons/icon-192-v2.png" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <div class="wrap">
    <div class="tag">ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆï¼ˆ4ãƒ”ãƒ¼ã‚¹ï¼‰</div>
    <h1>æ³¨æ„ã¨åŒæ„</h1>

    <div class="box">
      <strong>ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆã¯æœ‰æ–™ã§ã™ã€‚æœ€åˆã«æœ¬éƒ¨ã§ç™»éŒ²ãŒå¿…è¦ã§ã™ã€‚</strong>
      <ul>
        <li><strong>ã‚¯ã‚¨ã‚¹ãƒˆæœ¬éƒ¨ï¼ˆå¸‚å½¹æ‰€å‰ï¼‰</strong>ã§ç™»éŒ²ã—ã¦ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ã€‚</li>
        <li><strong>1æšç›®ã®QRã¯ã‚¯ã‚¨ã‚¹ãƒˆæœ¬éƒ¨ã«ã‚ã‚Šã¾ã™</strong>ï¼ˆç™»éŒ²å¾Œã«èª­ã¿å–ã‚Šã¾ã™ï¼‰ã€‚</li>
        <li>æœ¬éƒ¨ã®1æšç›®ã‚’èª­ã‚“ã å¾Œã€æ®‹ã‚Š3ã‹æ‰€ã®ã‚¨ãƒªã‚¢ã¸é€²ã¿ã¾ã™ã€‚</li>
      </ul>
      <p class="muted">â€»ã“ã®æ‰‹é †ã‚’è¸ã¾ãªã„å ´åˆã€é€”ä¸­ã®QRã‚’èª­ã‚“ã§ã‚‚æ¬¡ã«é€²ã‚ã¾ã›ã‚“ã€‚</p>
    </div>

    <div class="check">
      <label style="display:flex;gap:10px;align-items:flex-start;">
        <input type="checkbox" id="agree" style="margin-top:3px;">
        <span>
          ä¸Šè¨˜ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚<br>
          <small style="color:#444;opacity:.9;">ï¼ˆæœ‰æ–™ãƒ»æœ¬éƒ¨ç™»éŒ²ãƒ»1æšç›®ã¯æœ¬éƒ¨ã«ã‚ã‚‹ã“ã¨ã«åŒæ„ã—ã¾ã™ï¼‰</small>
        </span>
      </label>
    </div>

    <button class="btn primary" id="goFamily" disabled style="opacity:.6">åŒæ„ã—ã¦ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆã¸</button>
    <button class="btn sub" onclick="location.href='howto.html'">ğŸ“˜ ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹</button>
    <button class="btn" onclick="location.href='index.html'">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</button>
  </div>

  <script>
    const agree = document.getElementById("agree");
    const go = document.getElementById("goFamily");

    agree.addEventListener("change", () => {
      go.disabled = !agree.checked;
      go.style.opacity = agree.checked ? "1" : ".6";
    });

    go.addEventListener("click", () => {
      // ãƒ•ã‚¡ãƒŸãƒªãƒ¼é–‹å§‹ï¼ˆã¾ã æœªç™»éŒ²ï¼‰
      localStorage.setItem("mode", "family");

      // å¿µã®ãŸã‚ã€Œæœ¬éƒ¨é€šéãƒ•ãƒ©ã‚°ã€ã‚’è½ã¨ã—ã¦ã‹ã‚‰é–‹å§‹
      localStorage.removeItem("family_unlocked");
      localStorage.removeItem("family_unlocked_at");

      // âœ… åˆå›ã ã‘ intro.htmlï¼ˆã‚ˆãããŸãª ã‚†ã†ã˜ã‚ƒã‚ˆï¼‰â†’ 2å›ç›®ä»¥é™ã¯ start.html
      if (localStorage.getItem("visitedIntro_family") !== "true") {
        location.href = "intro.html";
      } else {
        location.href = "start.html";
      }
    });
  </script>
</body>
</html>
