<!DOCTYPE html>
<html lang="ja">
<head>
  <script src="event-config.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å‚åŠ è³ã®å—ã‘å–ã‚Š</title>
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;background:#fffaf2;margin:0;padding:24px;text-align:center;color:#3b2f1a}
    .card{max-width:600px;margin:0 auto;background:#fff;border:1px solid #eadfcf;border-radius:16px;padding:18px;box-shadow:0 10px 22px rgba(0,0,0,.08)}
    h1{margin:0 0 10px;font-size:1.35rem}
    p{margin:10px 0;line-height:1.7}
    .btn{display:block;width:100%;max-width:320px;margin:12px auto 0;padding:12px 14px;border:none;border-radius:12px;background:#4fa3ff;color:#fff;font-weight:800;font-size:1rem;cursor:pointer}
    .btn.secondary{background:#fff;color:#1f2937;border:1px solid #e5e7eb}
    .warn{font-size:.9rem;color:#7a5a2a;margin-top:10px}
  </style>
  <link rel="apple-touch-icon" href="icons/apple-touch-icon-v2.png" />
  <link rel="icon" href="icons/icon-192-v2.png" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <div class="card">
    <h1>ğŸ å‚åŠ è³ã®å—ã‘å–ã‚Š</h1>
    <p>
      ã“ã®ç”»é¢ã‚’<strong>ä¿‚å“¡</strong>ã«è¦‹ã›ã¦ãã ã•ã„ã€‚<br>
      ä¿‚å“¡ã®ç¢ºèªå¾Œã€å—ä»˜ã«ã‚ã‚‹<strong>å‚åŠ è³ã‚²ãƒƒãƒˆç”¨QR</strong>ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
    </p>
    <div class="warn">â€»ã“ã®ç”»é¢ã‚’é–‹ã„ãŸã ã‘ã§ã¯ã€Œã‚²ãƒƒãƒˆæ¸ˆã¿ã€ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚</div>

    <button class="btn" onclick="location.href='scanner/qr-scanner.html?mode=reward&return=../reward_get.html&back=../reward_intro.html'">ğŸ“· å‚åŠ è³ã‚²ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³</button>
    <button class="btn secondary" onclick="location.href='start.html'">â†© ã‚¯ã‚¨ã‚¹ãƒˆã«æˆ»ã‚‹</button>
  </div>

<script>
  // å—ä»˜ã‚¹ã‚¿ãƒ¼ãƒˆå¿…é ˆ
  const started = (localStorage.getItem('started') === 'true');
  if (!started) { location.replace('need_start.html'); }

  // äº¤ä»˜æ¸ˆã¿ãªã‚‰æˆ»ã™ï¼ˆå†è¡¨ç¤ºä¸å¯ï¼‰
  const claimed = (localStorage.getItem('reward_claimed') === 'true');
  if (claimed) {
    location.replace('start.html');
  }

  // æ¡ä»¶æœªé”ãªã‚‰æˆ»ã™
  const eligible =
    localStorage.getItem('area_shiyakusho') === 'true' &&
    localStorage.getItem('area_honmachi') === 'true' &&
    localStorage.getItem('area_fumoto') === 'true';

  if (!eligible) {
    location.replace('start.html');
  }
</script>
</body>
</html>
