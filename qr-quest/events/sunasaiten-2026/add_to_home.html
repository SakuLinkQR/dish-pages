<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ç ‚ã®ç¥­å…¸2026 - ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png" />
  <link rel="icon" href="icons/icon-192.png" />
  <link rel="manifest" href="manifest.json" />

  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;background:#fff7fa;text-align:center;padding:40px 20px;max-width:680px;margin:auto;color:#333}
    h1{font-size:1.8em;color:#ff4081;margin-bottom:12px}
    p{font-size:1.05em;margin-bottom:14px;line-height:1.7}
    .instruction{background:#fff3f8;padding:18px;border-radius:10px;margin:18px 0;text-align:left}
    .note{margin:0 0 18px;font-size:.95em;color:#555;line-height:1.6;text-align:left;background:#fff;border:1px solid #ffe0ec;padding:14px;border-radius:10px}
    .badge{display:inline-block;padding:6px 12px;border-radius:999px;background:#fff3f8;color:#c2185b;font-size:.95em;margin:6px 0 14px}
    .loading{font-size:1.0em;color:#555;margin:18px 0}
    .powered{margin-top:26px;font-size:12px;color:#888}
  </style>
</head>
<body>
  <h1>QRã‚¯ã‚¨ã‚¹ãƒˆ in ç ‚ã®ç¥­å…¸2026</h1>

  <div id="loading" class="loading" style="display:none;">èµ·å‹•ä¸­â€¦</div>
  <div id="badge" class="badge" style="display:none;"></div>

  <div id="instructions">
    <p>
      å—ä»˜QRã‚’èª­ã¿å–ã‚Šã¾ã—ãŸã€‚<br>
      æ¬¡ã¯ <strong>ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€</strong> ã‚’ã—ã¦ã€ã§ããŸ <strong>ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰é–‹å§‹</strong> ã—ã¦ãã ã•ã„ã€‚<br>
      ï¼ˆã“ã®ç”»é¢ã‹ã‚‰ã‚²ãƒ¼ãƒ ã¯é–‹å§‹ã§ãã¾ã›ã‚“ï¼‰
    </p>

    <div class="instruction">
      <p><strong>ğŸ“± iPhoneï¼ˆSafariï¼‰</strong><br>
        ç”»é¢ä¸‹ã® <strong>å…±æœ‰ãƒœã‚¿ãƒ³</strong>ï¼ˆâ–¡â†‘ï¼‰â†’ <strong>ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€</strong>
      </p>
      <p><strong>ğŸ“± Androidï¼ˆChromeï¼‰</strong><br>
        å³ä¸Šã® <strong>â‹® ãƒ¡ãƒ‹ãƒ¥ãƒ¼</strong> â†’ <strong>ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€</strong>
      </p>
    </div>

    <div class="note">
      <strong>ã‚¹ãƒãƒ›æ“ä½œãŒé›£ã—ã„æ–¹ã¸ï¼š</strong><br>
      ãƒ›ãƒ¼ãƒ ç”»é¢ã¸ã®è¿½åŠ ãŒé›£ã—ã„å ´åˆã¯ã€ç´™ã®ã‚¹ã‚¿ãƒ³ãƒ—ãƒ©ãƒªãƒ¼ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚<br>
      ãã‚Œã§ã‚‚ã‚¹ãƒãƒ›ã§å‚åŠ ã—ãŸã„æ–¹ã¯ã€ä¿‚å“¡ãŒã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ãŠæ‰‹ä¼ã„ã—ã¾ã™ã€‚
    </div>

    <p style="font-size:0.95em;color:#555;">
      è¿½åŠ ã§ããŸã‚‰ã€ã“ã®ç”»é¢ã‚’é–‰ã˜ã¦ã€<br>
      <strong>ãƒ›ãƒ¼ãƒ ç”»é¢ã«ã§ããŸã‚¢ã‚¤ã‚³ãƒ³</strong>ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¦ãã ã•ã„ã€‚
    </p>
  </div>

  <div class="powered">Powered by SakuLink</div>

<script>
(function(){
  const params = new URLSearchParams(location.search);
  const start = (params.get("start") || "").trim(); // shiyakusho / honmachi / fumoto

  // PWAåˆ¤å®šï¼ˆiOS/ä»–ï¼‰
  const isStandalone =
    (window.matchMedia && window.matchMedia("(display-mode: standalone)").matches) ||
    (window.navigator && window.navigator.standalone === true);

  function isStarted(){
    try{ return localStorage.getItem("started") === "true"; }catch(e){ return false; }
  }

  function setStartFlags(){
    // å—ä»˜å®Œäº†ãƒ•ãƒ©ã‚°ï¼ˆquest_go.html ãŒ started ã‚’è¦‹ã¦ã„ã¾ã™ï¼‰
    localStorage.setItem("started","true");
    localStorage.setItem("qrquest_started","true");
    localStorage.setItem("setup_done","true");

    // é–‹å§‹åœ°ç‚¹
    if(start){ localStorage.setItem("start_area", start); }

    // åˆæœŸãƒ”ãƒ¼ã‚¹ï¼š1ã¨9ï¼ˆäº’æ›å¤šã‚ï¼‰
    localStorage.setItem("piece_1","true");
    localStorage.setItem("piece_9","true");
    localStorage.setItem("c_piece1","true");
    localStorage.setItem("c_piece9","true");
    localStorage.setItem("q_piece1","true");
    localStorage.setItem("q_piece9","true");

    if(!localStorage.getItem("start_at")){
      localStorage.setItem("start_at", new Date().toISOString());
    }
  }

  // è¡¨ç¤ºï¼ˆå—ä»˜åœ°ç‚¹ãƒãƒƒã‚¸ï¼‰
  if(start){
    const badge = document.getElementById("badge");
    badge.style.display="inline-block";
    badge.textContent="å—ä»˜åœ°ç‚¹ï¼š " + start;
  }

  // â˜…é‡è¦ï¼šã‚¢ã‚¤ã‚³ãƒ³èµ·å‹•ï¼ˆPWAï¼‰ã§ã¯ã€å¿…ãšã“ã“ã‚’é€šã‚‹ï¼ˆmanifest start_url ãŒ add_to_homeï¼‰
  if(isStandalone){
    // ã™ã§ã«é–‹å§‹æ¸ˆã¿ãªã‚‰å³ãƒ›ãƒ¼ãƒ ã¸ï¼ˆç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢ï¼‰
    if(isStarted()){
      document.getElementById("instructions").style.display="none";
      document.getElementById("loading").style.display="block";
      location.replace("./index.html");
      return;
    }

    // åˆå›ï¼šstart= ãŒä»˜ã„ã¦ã„ã‚Œã°é–‹å§‹ãƒ•ãƒ©ã‚°ã‚’ç¢ºå®šâ†’ãƒ›ãƒ¼ãƒ ã¸
    if(start){
      document.getElementById("instructions").style.display="none";
      document.getElementById("loading").style.display="block";
      setStartFlags();
      location.replace("./index.html");
      return;
    }

    // ã‚‚ã— start ãŒç„¡ã„çŠ¶æ…‹ã§ã‚¢ã‚¤ã‚³ãƒ³èµ·å‹•ã—ã¦ã—ã¾ã£ãŸå ´åˆ
    // ï¼ˆèª¤ã£ãŸãƒšãƒ¼ã‚¸ã‹ã‚‰è¿½åŠ ã—ãŸç­‰ï¼‰â†’ å—ä»˜QRã‚’èª­ã¿ç›´ã—ã¦ã‚‚ã‚‰ã†ã—ã‹ãªã„
    // ã“ã®å ´åˆã¯æ¡ˆå†…ã‚’å‡ºã—ãŸã¾ã¾ã«ã™ã‚‹
  }

  // Safari/Chromeï¼ˆé€šå¸¸ãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã§é–‹ã„ãŸã¨ãã¯ start_area ã ã‘ä¿å­˜ï¼ˆè¨˜éŒ²ç”¨ï¼‰
  // â€»iOSã§ã¯PWAã¨åˆ†é›¢ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€é–‹å§‹ãƒ•ãƒ©ã‚°ã¯PWAå´ã§ç¢ºå®šã•ã›ã‚‹
  if(!isStandalone && start){
    try{ localStorage.setItem("start_area", start); }catch(e){}
  }
})();
</script>
</body>
</html>
